{% extends "base.html" %}

{% block content %}
    <!-- Hero Section -->
    <div class="hero text-center mb-12 cursor-pointer" onclick="toggleSidePanel()">
        <h1 class="text-5xl font-bold mb-4">Prompt Trial</h1>
        <p class="text-lg text-gray-300">Test your prompts and see the results in real-time.</p>
    </div>

    <!-- Chat Container -->
    <div id="chat-container" class="bg-gray-800 p-8 rounded-xl shadow-2xl h-[calc(100vh-200px)] flex flex-col">
        <!-- Chat History -->
        <div id="chat-history" class="flex-1 overflow-y-auto mb-6 space-y-4">
            <!-- Loading Indicator -->
            <div id="loading-indicator" class="hidden text-center">
                <div class="spinner mx-auto"></div>
                <p class="text-gray-300 mt-2">Generating response...</p>
            </div>
        </div>

        <!-- Input Area -->
        <div id="input-area" class="flex space-x-4">
            <input type="text" name="honeypot" style="display:none;">
            <textarea id="message-input" placeholder="Type a message..." class="w-full p-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"></textarea>
            <button id="send-btn" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200">Send</button>
        </div>
        <button onclick="openHelpPopup()" class="mt-4 text-blue-400 hover:text-blue-300 transition duration-200">How to use</button>
    </div>

    <!-- Help Popup -->
    <div id="help-popup" class="popup hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40">
        <div class="bg-gray-800 p-8 rounded-lg w-11/12 max-w-md">
            <button id="close-help-popup" class="float-right text-gray-400 hover:text-white">
                ✖️
            </button>
            <h2 class="text-2xl font-bold mb-6">How to use Prompt Trial</h2>
            <ul class="text-gray-300 space-y-2">
                <li><strong>reset</strong>: Reset the model.</li>
                <li><strong>clear</strong>: Clear the chat history.</li>
                <li><strong>imagine (prompt)</strong>: Generate an image based on the prompt.</li>
                <li><strong>title (prompt)</strong>: Generate a title based on the prompt.</li>
            </ul>
        </div>
    </div>

    <script defer src="{{ url_for('static', filename='script/try.js') }}"></script>
{% endblock %}
