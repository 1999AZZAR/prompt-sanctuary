{% extends "base.html" %}

{% block content %}
    <!-- Hero Section -->
    <div class="hero text-center mb-12 cursor-pointer" onclick="toggleSidePanel()">
        <h1 class="text-5xl font-bold mb-4">Prompt Generator <span class="text-blue-500">(Basic)</span></h1>
        <p class="text-lg text-gray-300">Create custom prompts tailored to your needs or use the random feature for inspiration.</p>
    </div>

    <!-- Welcome Section -->
    <div class="welcome bg-gray-800 p-8 rounded-xl shadow-2xl mb-12">
        <p class="text-lg text-gray-300">Here, you have the flexibility to <strong>create a customized prompt</strong> tailored to your specific requirements. Alternatively, you can opt to use the <strong>random feature</strong>, which will generate a prompt for youâ€”ensuring not only variety but also an element of <strong>surprise and enjoyment</strong> in the process. Whether you have a <strong>specific idea</strong> in mind or are seeking <strong>inspiration</strong>, the Prompt Generator is designed to accommodate both your <strong>structured and spontaneous</strong> prompt needs.</p>
    </div>

    <!-- Tools Section -->
    <div class="prompting grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
        <!-- Text Prompt -->
        <div class="bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Generate Text Prompt</h2>
                <button onclick="toggleHelp('text-help')" class="bg-gray-700 text-white px-3 py-1 rounded-lg hover:bg-gray-600 transition duration-200">?</button>
            </div>
            <div id="text-help" class="hidden bg-gray-700 p-4 rounded-lg mb-4">
                <p class="text-gray-300">This section allows you to generate text prompts. Enter your input and click "Generate" to create a custom prompt, or click "Random" for a surprise prompt.</p>
            </div>
            <form id="text-prompt-form" class="space-y-4 flex-grow">
                <div>
                    <label for="user_input_text" class="block mb-2">Input:</label>
                    <input type="text" name="user_input" id="user_input_text" placeholder="Write a Python code" class="w-full p-3 bg-gray-700 rounded-lg" required>
                </div>
                <div class="flex space-x-4">
                    <input type="submit" value="Generate" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200 cursor-pointer">
                    <input type="submit" value="Random" form="random-text-prompt-form" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-200 cursor-pointer">
                </div>
            </form>

            <!-- Add the random-text-prompt-form here -->
            <form id="random-text-prompt-form" style="display: none;">
                <input type="submit" value="random">
                <!-- This form is hidden and used only for the random button -->
            </form>
        </div>

        <!-- Image Prompt -->
        <div class="bg-gray-800 p-8 rounded-xl shadow-2xl flex flex-col">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Generate Image Prompt</h2>
                <button onclick="toggleHelp('image-help')" class="bg-gray-700 text-white px-3 py-1 rounded-lg hover:bg-gray-600 transition duration-200">?</button>
            </div>
            <div id="image-help" class="hidden bg-gray-700 p-4 rounded-lg mb-4">
                <p class="text-gray-300">This section allows you to generate image prompts. You can input text, upload an image, or choose a random prompt. Click "Generate" to create your prompt.</p>
            </div>
            <div class="space-y-4 flex-grow">
                <div class="input-radio flex space-x-4">
                    <label class="flex items-center space-x-2">
                        <input type="radio" id="text-input-option" name="prompt-option" value="text" checked onclick="togglePromptInput('text')">
                        <span>Text</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="radio" id="image-upload-option" name="prompt-option" value="image" onclick="togglePromptInput('image')">
                        <span>File</span>
                    </label>
                    <label class="flex items-center space-x-2">
                        <input type="radio" id="random-option" name="prompt-option" value="random" onclick="togglePromptInput('random')">
                        <span>Random</span>
                    </label>
                </div>

                <!-- Text Input Section -->
                <form id="image-prompt-form" class="space-y-4">
                    <div>
                        <label for="user_input_image" class="block mb-2">Input:</label>
                        <input type="text" name="user_input" id="user_input_image" placeholder="Whale on the desert" class="w-full p-3 bg-gray-700 rounded-lg" required>
                    </div>
                </form>

                <!-- Image Upload Section -->
                <form id="image-upload-form" enctype="multipart/form-data" class="space-y-4" style="display: none;">
                    <div>
                        <label for="image" class="block mb-2">Upload Image:</label>
                        <input type="file" name="image" accept="image/*" class="w-full p-3 bg-gray-700 rounded-lg" required>
                    </div>
                </form>

                <!-- Generate Button -->
                <button id="generate-button" onclick="generatePrompt()" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200 w-full">Generate</button>
            </div>
        </div>
    </div>

    <!-- Preview Section -->
    <div class="image-preview mt-12">
        <img id="preview-image" alt="Image Preview" src="{{ url_for('static', filename='icon/favicon.ico') }}" class="w-64 h-64 mx-auto rounded-lg">
    </div>

    <!-- Loading Section -->
    <div class="loading hidden" id="loading">
        <div class="spinner"></div>
        <h1 class="text-center mt-4">Generating...</h1>
    </div>

    <!-- Result Section -->
    <div class="result hidden bg-gray-800 p-8 rounded-xl shadow-2xl mt-8" id="resultSection">
        <h2 class="text-2xl font-bold mb-6">Generated Prompt:</h2>
        <div id="response" class="text-lg text-gray-300 space-y-4"></div>
        <div class="flex space-x-4 mt-6">
            <button onclick="copyToClipboard()" class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-200">Copy</button>
            <button onclick="promptForTitle()" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-200">Save</button>
        </div>
    </div>

    <script>
        function toggleHelp(helpId) {
            const helpDiv = document.getElementById(helpId);
            helpDiv.classList.toggle('hidden');
        }
    </script>
{% endblock %}
